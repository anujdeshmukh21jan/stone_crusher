{% extends "base.html" %}

{% block content %}
<body class="bg-gray-900 text-white" id="body">   
      <div class=" flex items-center justify-center p-4 ">
        <div class="bg-gray-800 p-4 space-y-4 border rounded-lg shadow-lg w-96 relative"> 

            <h3 class="text-white text-lg font-bold  mb-4">Firm Information Form</h3>
            
            <form id="firmForm" class="space-y-2">
               
                <div class="flex flex-col">
                    <label for="Firm_Name" class="block mb-2 text-sm text-white">Firm Name:</label>
                    <input  type="text" id="Firm_Name"  name="Firm_Name" maxlength="100" class="w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent" placeholder="Enter name">
                </div>

                <div class="flex flex-col">
                    <label for="rate_of_6mm" class="block mb-2 text-sm text-white">Rate of 6mm::</label>
                    <input  type="number" id="rate_of_6mm" name="rate_of_6mm" step="0.01" class="w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                </div>

                <div class="flex flex-col">
                    <label for="rate_of_12mm" class="block mb-2 text-sm text-white">Rate of 12mm::</label>
                    <input  type="number" id="rate_of_12mm" name="rate_of_12mm" step="0.01" class="w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                </div>
                <div class="flex flex-col">
                    <label for="rate_of_20mm" class="block mb-2 text-sm text-white">Rate of 20mm::</label>
                    <input  type="number" id="rate_of_20mm="rate_of_20mm="0.01" class="w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                </div>

                <div class="flex flex-col">
                    <label for="rate_of_40mm" class="block mb-2 text-sm text-white">Rate of 40mm::</label>
                    <input  type="number" id="rate_of_40mm" name="rate_of_40mm" step="0.01" class="w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                </div>

                <!-- Contact Number Field -->
                <div class="flex flex-col">
                    <label for="mobile_number_1" class="block mb-2 text-sm text-white">Contact Number 1 / संपर्क नंबर 1:</label>
                    <div class="flex">
                        <span class="flex items-center px-3 bg-gray-700 text-white rounded-l border border-gray-400 ">+91</span>
                        <input type="text" id="mobile_number_1" name="mobile_number_1" maxlength="10" class="w-full px-3 py-2 bg-gray-700 text-white rounded-r border border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent" placeholder="Enter 10-digit number" oninput="validateContactNumber(this)">
                    </div>
                    <span id="contactError" class="text-red-500 text-sm hidden">Contact number must be exactly 10 digits./ संपर्क नंबर 10 अंकों का होना चाहिए.</span>
                </div>

                <!-- Contact Number Field -->
                <div class="flex flex-col">
                    <label for="mobile_number_2" class="block mb-2 text-sm text-white">Contact Number 2 / संपर्क नंबर 2:</label>
                        <div class="flex">
                            <span class="flex items-center px-3 bg-gray-700 text-white rounded-l border border-gray-400">+91</span>
                            <input type="text" id="mobile_number_2" name="mobile_number_2" maxlength="10" class="w-full px-3 py-2 bg-gray-700 text-white rounded-r border border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent" placeholder="Enter 10-digit number" oninput="validateContactNumber(this)">
                        </div>
                    <span id="contactError" class="text-red-500 text-sm hidden">Contact number must be exactly 10 digits./ संपर्क नंबर 10 अंकों का होना चाहिए.</span>
                </div>
 
                <!-- Buttons -->
                <div class="flex justify-center py-2 px-6">
                    <button type="reset" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-md focus:outline-none focus:ring focus:ring-red-500">
                        Clear
                    </button>
                    <button type="submit" class="ml-4 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-md focus:outline-none focus:ring focus:ring-green-500">
                        Submit
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success Message -->
    <p id="successMessage" style="display:none; color: green;">Form submitted successfully!</p>

    <!-- jQuery AJAX Script -->
    <script>
        $(document).ready(function() {
            $('#firmForm').on('submit', function(event) {
                event.preventDefault();  // Prevent the form from submitting the traditional way
    
                // Send AJAX request
                $.ajax({
                    type: 'POST',
                    url: '/update_constants/',  // Django URL for form submission
                    data: $(this).serialize(),  // Serialize form data
                    headers: {
                        'X-CSRFToken': '{{ csrf_token }}'  // Add CSRF token for security
                    },
                    success: function(response) {
                        // Display success message
                        $('#successMessage').show();
                        // Optionally, reset the form
                        $('#firmForm')[0].reset();
                    },
                    error: function(xhr, status, error) {
                        // Handle errors (optional)
                        alert('Form submission failed. Please try again.');
                    }
                });
            });
        });
    </script>
</body>

{% endblock %}